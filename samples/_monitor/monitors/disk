#! /usr/bin/env xs

INTVL = 600
THRPCT = 85
VOLUMES = / /boot /home /run /tmp /var

. $HERE/common

while true {
	sleep $INTVL
	utilizations = `{df | less -n +2 | grep -w '-e'^$VOLUMES | tr -d % \
		| awk '{ print $5 "\t" $6 }'}
	while {!~ $utilizations ()} {
		(occ name) = $utilizations(1 2)
		utilizations = $utilizations(3 ...)
		{$occ :ge $THRPCT} && announce $name is $occ^% full!
	}
}
