systemd does not pass locale environment variables when spawning
a login shell. This can cause readline to improperly redraw the
input upon exiting incremental history search when $prompt
contains multibyte UTF-8 characters.

While it's possible to "fix" this by editing the getty@.service
file to comment out the Environment=... line, I think it's safer
to include the following code in your ~/.xsrc file.

	-- begin ~/.xsrc --
	result $force_locale && { # locale hack
	{~ $LC_ALL ()} && {force_locale = <=true}
	LC_ALL = en_US.utf8
	
	# ... your code goes here ...
	
	result $force_locale && {
		force_locale = <=false
		SHLVL = `($SHLVL-1)
		exec xs -l
	}
	} # locale hack
	-- end ~/.xsrc --
